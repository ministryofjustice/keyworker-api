<?xml version="1.0" encoding="UTF-8"?><database name="keyworker-api-db" schema="public" type="PostgreSQL - 16.10 (Debian 16.10-1.pgdg13+1)">
   <sequences>
      <sequence increment="1" name="audit_revision_id_seq" startValue="1"/>
      <sequence increment="1" name="case_note_type_recorded_event_type_id_seq" startValue="1"/>
      <sequence increment="1" name="keyworker_stats_keyworker_stats_id_seq" startValue="1"/>
      <sequence increment="1" name="offender_key_worker_offender_keyworker_id_seq" startValue="1"/>
      <sequence increment="1" name="reference_data_id_seq" startValue="1"/>
   </sequences>
   <tables>
      <table catalog="keyworker-api-db" name="allocation" remarks="" schema="public" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="id" nullable="false" remarks="" size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="prison_code" nullable="false" remarks="" size="6" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="prison_migration_date_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="staff_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="person_identifier" nullable="false" remarks="" size="10" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="4" name="allocated_at" nullable="false" remarks="" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="allocation_type" nullable="false" remarks="" size="1" type="bpchar" typeCode="1"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="allocated_by" nullable="false" remarks="" size="64" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="allocation_reason_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5">
            <parent catalog="keyworker-api-db" column="id" foreignKey="allocation_allocation_reason_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="reference_data"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="6" id="8" name="deallocated_at" nullable="true" remarks="" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="9" name="deallocation_reason_id" nullable="true" remarks="" size="19" type="int8" typeCode="-5">
            <parent catalog="keyworker-api-db" column="id" foreignKey="allocation_deallocation_reason_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="reference_data"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="10" name="deallocated_by" nullable="true" remarks="" size="64" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="11" name="is_active" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="12" name="policy_code" nullable="false" remarks="" size="16" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="code" foreignKey="allocation_policy_code_fkey" implied="false" onDeleteCascade="false" schema="public" table="policy"/>
         </column>
         <primaryKey column="id" sequenceNumberInPK="1"/>
         <index name="pk_allocation" unique="true">
            <column ascending="true" name="id"/>
         </index>
         <index name="idx_active_staff_allocations" unique="false">
            <column ascending="true" name="staff_id"/>
            <column ascending="true" name="prison_code"/>
            <column ascending="true" name="policy_code"/>
         </index>
         <index name="idx_allocation_person_identifier" unique="false">
            <column ascending="true" name="person_identifier"/>
            <column ascending="true" name="policy_code"/>
         </index>
         <index name="idx_allocation_person_identifier_prison_code_policy" unique="false">
            <column ascending="true" name="person_identifier"/>
            <column ascending="true" name="prison_code"/>
            <column ascending="true" name="policy_code"/>
         </index>
         <index name="idx_allocation_prison_code" unique="false">
            <column ascending="true" name="prison_code"/>
            <column ascending="true" name="policy_code"/>
         </index>
         <index name="idx_allocation_staff_id_allocated_at_deallocated_at" unique="false">
            <column ascending="true" name="staff_id"/>
            <column ascending="true" name="allocated_at"/>
            <column ascending="true" name="deallocated_at"/>
            <column ascending="true" name="policy_code"/>
         </index>
         <index name="idx_allocation_with_and_at" unique="false">
            <column ascending="true" name="staff_id"/>
            <column ascending="true" name="person_identifier"/>
            <column ascending="true" name="allocated_at"/>
            <column ascending="true" name="policy_code"/>
            <column ascending="true" name="prison_code"/>
            <column ascending="true" name="deallocated_at"/>
         </index>
         <index name="uq_allocation" unique="true">
            <column ascending="true" name="person_identifier"/>
            <column ascending="true" name="policy_code"/>
         </index>
         <checkConstraint constraint="((allocation_type = ANY (ARRAY['A'::bpchar, 'M'::bpchar, 'P'::bpchar])))" name="allocation_allocation_type"/>
         <checkConstraint constraint="((NOT ((is_active = true) AND ((deallocated_at IS NOT NULL) OR (deallocated_by IS NOT NULL) OR (deallocation_reason_id IS NOT NULL)))))" name="ch_allocation_is_active"/>
         <checkConstraint constraint="((NOT ((is_active = false) AND ((deallocated_at IS NULL) OR (deallocated_by IS NULL) OR (deallocation_reason_id IS NULL)))))" name="ch_allocation_is_not_active"/>
      </table>
      <table catalog="keyworker-api-db" name="allocation_audit" remarks="" schema="public" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="rev_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5">
            <parent catalog="keyworker-api-db" column="id" foreignKey="allocation_audit_rev_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="audit_revision"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="rev_type" nullable="false" remarks="" size="5" type="int2" typeCode="5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="id" nullable="false" remarks="" size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="prison_code" nullable="false" remarks="" size="6" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="prison_migration_date_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="staff_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="person_identifier" nullable="false" remarks="" size="10" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="6" name="allocated_at" nullable="false" remarks="" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="allocation_type" nullable="false" remarks="" size="1" type="bpchar" typeCode="1"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="8" name="allocated_by" nullable="false" remarks="" size="64" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="9" name="allocation_reason_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="10" name="deallocated_at" nullable="true" remarks="" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="11" name="deallocation_reason_id" nullable="true" remarks="" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="12" name="deallocated_by" nullable="true" remarks="" size="64" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="13" name="is_active" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="14" name="policy_code" nullable="false" remarks="" size="16" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="policy"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="15" name="person_identifier_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="16" name="deallocated_at_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="17" name="deallocation_reason_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="18" name="deallocated_by_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="19" name="is_active_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <primaryKey column="rev_id" sequenceNumberInPK="1"/>
         <primaryKey column="id" sequenceNumberInPK="2"/>
         <index name="allocation_audit_pkey" unique="true">
            <column ascending="true" name="rev_id"/>
            <column ascending="true" name="id"/>
         </index>
         <index name="idx_allocation_audit_id" unique="false">
            <column ascending="true" name="id"/>
         </index>
      </table>
      <table catalog="keyworker-api-db" name="audit_revision" remarks="" schema="public" type="TABLE">
         <column autoUpdated="true" defaultValue="nextval('audit_revision_id_seq'::regclass)" digits="0" id="0" name="id" nullable="false" remarks="" size="19" type="bigserial" typeCode="-5">
            <child catalog="keyworker-api-db" column="rev_id" foreignKey="allocation_audit_rev_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="allocation_audit"/>
            <child catalog="keyworker-api-db" column="rev_id" foreignKey="prison_configuration_audit_rev_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="prison_configuration_audit"/>
            <child catalog="keyworker-api-db" column="rev_id" foreignKey="recorded_event_audit_rev_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="recorded_event_audit"/>
            <child catalog="keyworker-api-db" column="rev_id" foreignKey="staff_configuration_audit_rev_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="staff_configuration_audit"/>
            <child catalog="keyworker-api-db" column="rev_id" foreignKey="staff_role_audit_rev_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="staff_role_audit"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="6" id="1" name="timestamp" nullable="false" remarks="" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="username" nullable="false" remarks="" size="32" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="caseload_id" nullable="true" remarks="" size="10" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="affected_entities" nullable="false" remarks="" size="2147483647" type="_varchar" typeCode="2003"/>
         <primaryKey column="id" sequenceNumberInPK="1"/>
         <index name="audit_revision_pkey" unique="true">
            <column ascending="true" name="id"/>
         </index>
      </table>
      <table catalog="keyworker-api-db" name="case_note_type_recorded_event_type" remarks="" schema="public" type="TABLE">
         <column autoUpdated="true" defaultValue="nextval('case_note_type_recorded_event_type_id_seq'::regclass)" digits="0" id="0" name="id" nullable="false" remarks="" size="19" type="bigserial" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="cn_type" nullable="false" remarks="" size="32" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="cn_sub_type" nullable="false" remarks="" size="32" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="policy_code" nullable="false" remarks="" size="16" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="policy"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="recorded_event_type_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5"/>
         <primaryKey column="id" sequenceNumberInPK="1"/>
         <index name="case_note_type_recorded_event_type_pkey" unique="true">
            <column ascending="true" name="id"/>
         </index>
         <index name="uq_case_note_type_subtype" unique="true">
            <column ascending="true" name="cn_type"/>
            <column ascending="true" name="cn_sub_type"/>
         </index>
      </table>
      <table catalog="keyworker-api-db" name="policy" remarks="" schema="public" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="code" nullable="false" remarks="" size="16" type="varchar" typeCode="12">
            <child catalog="keyworker-api-db" column="policy_code" foreignKey="allocation_policy_code_fkey" implied="false" onDeleteCascade="false" schema="public" table="allocation"/>
            <child catalog="keyworker-api-db" column="policy_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="allocation_audit"/>
            <child catalog="keyworker-api-db" column="policy_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="case_note_type_recorded_event_type"/>
            <child catalog="keyworker-api-db" column="policy_code" foreignKey="prison_configuration_policy_code_fkey" implied="false" onDeleteCascade="false" schema="public" table="prison_configuration"/>
            <child catalog="keyworker-api-db" column="policy_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="prison_configuration_audit"/>
            <child catalog="keyworker-api-db" column="policy_code" foreignKey="prison_statistic_policy_code_fkey" implied="false" onDeleteCascade="false" schema="public" table="prison_statistic"/>
            <child catalog="keyworker-api-db" column="policy_code" foreignKey="recorded_event_policy_code_fkey" implied="false" onDeleteCascade="false" schema="public" table="recorded_event"/>
            <child catalog="keyworker-api-db" column="policy_code" foreignKey="recorded_event_audit_policy_code_fkey" implied="false" onDeleteCascade="false" schema="public" table="recorded_event_audit"/>
            <child catalog="keyworker-api-db" column="policy_code" foreignKey="reference_data_policy_policy_code_fkey" implied="false" onDeleteCascade="false" schema="public" table="reference_data_policy"/>
            <child catalog="keyworker-api-db" column="policy_code" foreignKey="staff_configuration_policy_code_fkey" implied="false" onDeleteCascade="false" schema="public" table="staff_configuration"/>
            <child catalog="keyworker-api-db" column="policy_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="staff_configuration_audit"/>
            <child catalog="keyworker-api-db" column="policy_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="staff_role"/>
            <child catalog="keyworker-api-db" column="policy_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="staff_role_audit"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="description" nullable="false" remarks="" size="255" type="varchar" typeCode="12"/>
         <primaryKey column="code" sequenceNumberInPK="1"/>
         <index name="policy_pkey" unique="true">
            <column ascending="true" name="code"/>
         </index>
      </table>
      <table catalog="keyworker-api-db" name="prison_configuration" numRows="12" remarks="Records the prisons have can be supported by this service and which have been migrated" schema="public" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="prison_code" nullable="false" remarks="Prison ID (NOMIS column is Agency ID)" size="6" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="prison_migration_date_history"/>
         </column>
         <column autoUpdated="false" defaultValue="false" digits="0" id="1" name="allow_auto_allocation" nullable="false" remarks="Indicates that the prisons supports auto allocation" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="false" digits="0" id="2" name="is_enabled" nullable="false" remarks="Indicates if the prison keyworker data has been migrated" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="capacity" nullable="false" remarks="Default capacity for keyworkers at this prison" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="maximum_capacity" nullable="false" remarks="Default extended capacity for keyworkers at this prison" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="frequency_in_weeks" nullable="false" remarks="Key worker session frequency for the prison" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="false" digits="0" id="6" name="has_prisoners_with_high_complexity_needs" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="policy_code" nullable="false" remarks="" size="16" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="code" foreignKey="prison_configuration_policy_code_fkey" implied="false" onDeleteCascade="false" schema="public" table="policy"/>
         </column>
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="8" name="id" nullable="false" remarks="" size="2147483647" type="uuid" typeCode="1111"/>
         <primaryKey column="id" sequenceNumberInPK="1"/>
         <index name="prison_configuration_pkey" unique="true">
            <column ascending="true" name="id"/>
         </index>
         <index name="prison_configuration_prison_code_policy_code" unique="true">
            <column ascending="true" name="prison_code"/>
            <column ascending="true" name="policy_code"/>
         </index>
      </table>
      <table catalog="keyworker-api-db" name="prison_configuration_audit" remarks="" schema="public" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="rev_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5">
            <parent catalog="keyworker-api-db" column="id" foreignKey="prison_configuration_audit_rev_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="audit_revision"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="rev_type" nullable="false" remarks="" size="5" type="int2" typeCode="5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="id" nullable="false" remarks="" size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="prison_code" nullable="false" remarks="" size="6" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="prison_migration_date_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="is_enabled" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="capacity" nullable="false" remarks="" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="maximum_capacity" nullable="false" remarks="" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="allow_auto_allocation" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="8" name="frequency_in_weeks" nullable="false" remarks="" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="9" name="has_prisoners_with_high_complexity_needs" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="10" name="policy_code" nullable="false" remarks="" size="16" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="policy"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="11" name="is_enabled_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="12" name="capacity_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="13" name="maximum_capacity_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="14" name="allow_auto_allocation_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="15" name="frequency_in_weeks_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="16" name="has_prisoners_with_high_complexity_needs_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <primaryKey column="rev_id" sequenceNumberInPK="1"/>
         <primaryKey column="id" sequenceNumberInPK="2"/>
         <index name="prison_configuration_audit_pkey" unique="true">
            <column ascending="true" name="rev_id"/>
            <column ascending="true" name="id"/>
         </index>
      </table>
      <table catalog="keyworker-api-db" name="prison_migration_date_history" remarks="" schema="public" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="prison_code" nullable="false" remarks="" size="6" type="varchar" typeCode="12">
            <child catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="allocation"/>
            <child catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="allocation_audit"/>
            <child catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="prison_configuration"/>
            <child catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="prison_configuration_audit"/>
            <child catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="prison_statistic"/>
            <child catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="recorded_event"/>
            <child catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="recorded_event_audit"/>
            <child catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="staff_role"/>
            <child catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="staff_role_audit"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="6" id="1" name="migration_date" nullable="false" remarks="" size="29" type="timestamp" typeCode="93"/>
         <primaryKey column="prison_code" sequenceNumberInPK="1"/>
         <index name="prison_migration_date_history_pkey" unique="true">
            <column ascending="true" name="prison_code"/>
         </index>
      </table>
      <table catalog="keyworker-api-db" name="prison_statistic" remarks="Records the results of each statistic snapshot" schema="public" type="TABLE">
         <column autoUpdated="true" defaultValue="nextval('keyworker_stats_keyworker_stats_id_seq'::regclass)" digits="0" id="0" name="id" nullable="false" remarks="Primary key ID" size="19" type="bigserial" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="prison_code" nullable="false" remarks="Prison ID" size="6" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="prison_migration_date_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="6" id="2" name="statistic_date" nullable="false" remarks="Timestamp of date for which stats apply" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="prisoners_assigned_count" nullable="false" remarks="Number of prisoner who have been assigned a Key worker" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="prisoner_count" nullable="false" remarks="Total number of prisoners in the prison on this date" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="recorded_session_count" nullable="true" remarks="Number of Key worker case note sessions" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="recorded_entry_count" nullable="true" remarks="Number of Key worker case note entries" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="eligible_staff_count" nullable="true" remarks="Number of active keyworkers" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="8" name="reception_to_allocation_days" nullable="true" remarks="Number of days (avg) between reception and allocation of a keyworker" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="9" name="reception_to_recorded_event_days" nullable="true" remarks="Number of days (avg) between reception and first Key worker session" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="10" name="eligible_prisoner_count" nullable="false" remarks="" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="11" name="high_complexity_of_need_prisoner_count" nullable="false" remarks="" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="12" name="policy_code" nullable="false" remarks="" size="16" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="code" foreignKey="prison_statistic_policy_code_fkey" implied="false" onDeleteCascade="false" schema="public" table="policy"/>
         </column>
         <primaryKey column="id" sequenceNumberInPK="1"/>
         <index name="pk_prison_statistic" unique="true">
            <column ascending="true" name="id"/>
         </index>
         <index name="idx_prison_statistic_date_prison" unique="false">
            <column ascending="true" name="statistic_date"/>
            <column ascending="true" name="prison_code"/>
         </index>
      </table>
      <table catalog="keyworker-api-db" name="recorded_event" remarks="" schema="public" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="id" nullable="false" remarks="" size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="prison_code" nullable="false" remarks="" size="6" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="prison_migration_date_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="person_identifier" nullable="false" remarks="" size="7" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="staff_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="username" nullable="false" remarks="" size="64" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="5" name="occurred_at" nullable="false" remarks="" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="version" nullable="false" remarks="" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="7" name="created_at" nullable="false" remarks="" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="8" name="policy_code" nullable="false" remarks="" size="16" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="code" foreignKey="recorded_event_policy_code_fkey" implied="false" onDeleteCascade="false" schema="public" table="policy"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="9" name="type_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5">
            <parent catalog="keyworker-api-db" column="id" foreignKey="recorded_event_type_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="reference_data"/>
         </column>
         <primaryKey column="id" sequenceNumberInPK="1"/>
         <index name="recorded_event_pkey" unique="true">
            <column ascending="true" name="id"/>
         </index>
         <index name="idx_recorded_event_person_identifier_occurred_at_policy" unique="false">
            <column ascending="true" name="person_identifier"/>
            <column ascending="true" name="policy_code"/>
            <column ascending="true" name="occurred_at"/>
         </index>
         <index name="idx_recorded_event_prison_code_created_at_policy" unique="false">
            <column ascending="true" name="prison_code"/>
            <column ascending="true" name="created_at"/>
            <column ascending="true" name="policy_code"/>
         </index>
         <index name="idx_recorded_event_prison_code_occurred_at_policy" unique="false">
            <column ascending="true" name="prison_code"/>
            <column ascending="true" name="occurred_at"/>
            <column ascending="true" name="policy_code"/>
         </index>
         <index name="idx_recorded_event_staff_id_occurred_at_policy_prison_code" unique="false">
            <column ascending="true" name="staff_id"/>
            <column ascending="true" name="policy_code"/>
            <column ascending="true" name="occurred_at"/>
            <column ascending="true" name="prison_code"/>
         </index>
         <index name="idx_recorded_event_type_id_policy" unique="false">
            <column ascending="true" name="type_id"/>
            <column ascending="true" name="policy_code"/>
         </index>
      </table>
      <table catalog="keyworker-api-db" name="recorded_event_audit" remarks="" schema="public" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="rev_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5">
            <parent catalog="keyworker-api-db" column="id" foreignKey="recorded_event_audit_rev_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="audit_revision"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="rev_type" nullable="false" remarks="" size="5" type="int2" typeCode="5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="id" nullable="false" remarks="" size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="prison_code" nullable="false" remarks="" size="6" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="prison_migration_date_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="person_identifier" nullable="false" remarks="" size="7" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="staff_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="username" nullable="false" remarks="" size="64" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="7" name="occurred_at" nullable="false" remarks="" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="8" name="created_at" nullable="false" remarks="" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="9" name="policy_code" nullable="true" remarks="" size="16" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="code" foreignKey="recorded_event_audit_policy_code_fkey" implied="false" onDeleteCascade="false" schema="public" table="policy"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="10" name="type_id" nullable="true" remarks="" size="19" type="int8" typeCode="-5"/>
      </table>
      <table catalog="keyworker-api-db" name="reference_data" numRows="59" remarks="" schema="public" type="TABLE">
         <column autoUpdated="true" defaultValue="nextval('reference_data_id_seq'::regclass)" digits="0" id="0" name="id" nullable="false" remarks="" size="19" type="bigserial" typeCode="-5">
            <child catalog="keyworker-api-db" column="allocation_reason_id" foreignKey="allocation_allocation_reason_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="allocation"/>
            <child catalog="keyworker-api-db" column="deallocation_reason_id" foreignKey="allocation_deallocation_reason_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="allocation"/>
            <child catalog="keyworker-api-db" column="type_id" foreignKey="recorded_event_type_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="recorded_event"/>
            <child catalog="keyworker-api-db" column="id" foreignKey="reference_data_policy_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="reference_data_policy"/>
            <child catalog="keyworker-api-db" column="status_id" foreignKey="key_worker_status_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="staff_configuration"/>
            <child catalog="keyworker-api-db" column="allocation_reason_id" foreignKey="offender_key_worker_allocation_reason_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="zz_archived_legacy_keyworker_allocation"/>
            <child catalog="keyworker-api-db" column="deallocation_reason_id" foreignKey="offender_key_worker_deallocation_reason_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="zz_archived_legacy_keyworker_allocation"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="domain" nullable="false" remarks="" size="32" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="code" nullable="false" remarks="" size="32" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="description" nullable="false" remarks="" size="128" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="sequence_number" nullable="false" remarks="" size="10" type="int4" typeCode="4"/>
         <primaryKey column="id" sequenceNumberInPK="1"/>
         <index name="reference_data_pkey" unique="true">
            <column ascending="true" name="id"/>
         </index>
         <index name="unq_reference_data_domain_code" unique="true">
            <column ascending="true" name="domain"/>
            <column ascending="true" name="code"/>
         </index>
         <index name="unq_reference_data_domain_sequence" unique="true">
            <column ascending="true" name="domain"/>
            <column ascending="true" name="sequence_number"/>
         </index>
      </table>
      <table catalog="keyworker-api-db" name="reference_data_policy" remarks="" schema="public" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="id" nullable="false" remarks="" size="19" type="int8" typeCode="-5">
            <parent catalog="keyworker-api-db" column="id" foreignKey="reference_data_policy_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="reference_data"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="policy_code" nullable="false" remarks="" size="16" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="code" foreignKey="reference_data_policy_policy_code_fkey" implied="false" onDeleteCascade="false" schema="public" table="policy"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="description_override" nullable="true" remarks="" size="128" type="varchar" typeCode="12"/>
         <index name="idx_reference_data_policy" unique="true">
            <column ascending="true" name="id"/>
            <column ascending="true" name="policy_code"/>
         </index>
      </table>
      <table catalog="keyworker-api-db" name="staff_configuration" remarks="Stores Key worker basic details, including status and capacity." schema="public" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="staff_id" nullable="false" remarks="The unique staff identifier for Key worker in core OMS" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="capacity" nullable="false" remarks="Standard number of offenders that can be allocated to Key worker" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="status_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5">
            <parent catalog="keyworker-api-db" column="id" foreignKey="key_worker_status_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="reference_data"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="allow_auto_allocation" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="reactivate_on" nullable="true" remarks="" size="13" type="date" typeCode="91"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="policy_code" nullable="false" remarks="" size="16" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="code" foreignKey="staff_configuration_policy_code_fkey" implied="false" onDeleteCascade="false" schema="public" table="policy"/>
         </column>
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="6" name="id" nullable="false" remarks="" size="2147483647" type="uuid" typeCode="1111"/>
         <primaryKey column="id" sequenceNumberInPK="1"/>
         <index name="staff_configuration_pkey" unique="true">
            <column ascending="true" name="id"/>
         </index>
         <index name="staff_configuration_staff_id_policy_code" unique="true">
            <column ascending="true" name="staff_id"/>
            <column ascending="true" name="policy_code"/>
         </index>
      </table>
      <table catalog="keyworker-api-db" name="staff_configuration_audit" remarks="" schema="public" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="rev_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5">
            <parent catalog="keyworker-api-db" column="id" foreignKey="staff_configuration_audit_rev_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="audit_revision"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="rev_type" nullable="false" remarks="" size="5" type="int2" typeCode="5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="id" nullable="false" remarks="" size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="staff_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="capacity" nullable="false" remarks="" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="reactivate_on" nullable="true" remarks="" size="13" type="date" typeCode="91"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="status_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="allow_auto_allocation" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="8" name="policy_code" nullable="false" remarks="" size="16" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="policy"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="9" name="capacity_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="10" name="reactivate_on_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="11" name="status_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="12" name="allow_auto_allocation_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <primaryKey column="rev_id" sequenceNumberInPK="1"/>
         <primaryKey column="id" sequenceNumberInPK="2"/>
         <index name="staff_configuration_audit_pkey" unique="true">
            <column ascending="true" name="rev_id"/>
            <column ascending="true" name="id"/>
         </index>
      </table>
      <table catalog="keyworker-api-db" name="staff_role" remarks="" schema="public" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="id" nullable="false" remarks="" size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="policy_code" nullable="false" remarks="" size="16" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="policy"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="prison_code" nullable="false" remarks="" size="6" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="prison_migration_date_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="staff_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="position_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="schedule_type_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="hours_per_week" nullable="false" remarks="" size="0" type="numeric" typeCode="2"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="from_date" nullable="false" remarks="" size="13" type="date" typeCode="91"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="8" name="to_date" nullable="true" remarks="" size="13" type="date" typeCode="91"/>
         <primaryKey column="id" sequenceNumberInPK="1"/>
         <index name="staff_role_pkey" unique="true">
            <column ascending="true" name="id"/>
         </index>
         <index name="staff_role_prison_code_staff_id_policy_code" unique="true">
            <column ascending="true" name="prison_code"/>
            <column ascending="true" name="staff_id"/>
            <column ascending="true" name="policy_code"/>
         </index>
      </table>
      <table catalog="keyworker-api-db" name="staff_role_audit" remarks="" schema="public" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="rev_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5">
            <parent catalog="keyworker-api-db" column="id" foreignKey="staff_role_audit_rev_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="audit_revision"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="rev_type" nullable="false" remarks="" size="5" type="int2" typeCode="5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="id" nullable="false" remarks="" size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="policy_code" nullable="false" remarks="" size="16" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="policy"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="prison_code" nullable="false" remarks="" size="6" type="varchar" typeCode="12">
            <parent catalog="keyworker-api-db" column="prison_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="public" table="prison_migration_date_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="staff_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="position_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="schedule_type_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="8" name="hours_per_week" nullable="false" remarks="" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="9" name="from_date" nullable="false" remarks="" size="13" type="date" typeCode="91"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="10" name="to_date" nullable="true" remarks="" size="13" type="date" typeCode="91"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="11" name="position_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="12" name="schedule_type_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="13" name="hours_per_week_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="14" name="from_date_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="15" name="to_date_modified" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <primaryKey column="rev_id" sequenceNumberInPK="1"/>
         <primaryKey column="id" sequenceNumberInPK="2"/>
         <index name="staff_role_audit_pkey" unique="true">
            <column ascending="true" name="rev_id"/>
            <column ascending="true" name="id"/>
         </index>
      </table>
      <table catalog="keyworker-api-db" name="zz_archived_legacy_keyworker_allocation" remarks="Records the Key Worker assignment history of offenders on remand or serving custodial sentences held within an establishment." schema="public" type="TABLE">
         <column autoUpdated="true" defaultValue="nextval('offender_key_worker_offender_keyworker_id_seq'::regclass)" digits="0" id="0" name="offender_keyworker_id" nullable="false" remarks="" size="19" type="bigserial" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="offender_no" nullable="false" remarks="The Related Offender No" size="10" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="staff_id" nullable="false" remarks="The Related Key Worker Staff Id" size="19" type="int8" typeCode="-5"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="3" name="assigned_date_time" nullable="false" remarks="Assigned Date and Time" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="active_flag" nullable="false" remarks="Assignment Active Flag" size="1" type="bpchar" typeCode="1"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="alloc_type" nullable="false" remarks="Type of allocation, M for manual, A for auto, P for provisional" size="1" type="bpchar" typeCode="1"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="user_id" nullable="false" remarks="Assigned by User Id" size="32" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="prison_id" nullable="false" remarks="Prison Id" size="6" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="8" name="expiry_date_time" nullable="true" remarks="Expiry Date and Time of Assignment" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="9" name="create_datetime" nullable="false" remarks="" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="10" name="create_user_id" nullable="false" remarks="" size="32" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="11" name="modify_datetime" nullable="true" remarks="" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="12" name="modify_user_id" nullable="true" remarks="" size="32" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="13" name="allocation_reason_id" nullable="false" remarks="" size="19" type="int8" typeCode="-5">
            <parent catalog="keyworker-api-db" column="id" foreignKey="offender_key_worker_allocation_reason_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="reference_data"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="14" name="deallocation_reason_id" nullable="true" remarks="" size="19" type="int8" typeCode="-5">
            <parent catalog="keyworker-api-db" column="id" foreignKey="offender_key_worker_deallocation_reason_id_fkey" implied="false" onDeleteCascade="false" schema="public" table="reference_data"/>
         </column>
         <primaryKey column="offender_keyworker_id" sequenceNumberInPK="1"/>
         <index name="offender_key_worker_pk" unique="true">
            <column ascending="true" name="offender_keyworker_id"/>
         </index>
         <index name="offender_key_worker_ai_idx" unique="false">
            <column ascending="true" name="prison_id"/>
         </index>
         <index name="offender_key_worker_on_idx" unique="false">
            <column ascending="true" name="offender_no"/>
         </index>
         <index name="offender_key_worker_si_idx" unique="false">
            <column ascending="true" name="staff_id"/>
         </index>
         <index name="offender_keyworker_unique" unique="true">
            <column ascending="true" name="offender_no"/>
            <column ascending="true" name="staff_id"/>
            <column ascending="true" name="assigned_date_time"/>
         </index>
         <checkConstraint constraint="((alloc_type = ANY (ARRAY['A'::bpchar, 'M'::bpchar, 'P'::bpchar])))" name="offender_key_worker_c1"/>
      </table>
   </tables>
</database>
